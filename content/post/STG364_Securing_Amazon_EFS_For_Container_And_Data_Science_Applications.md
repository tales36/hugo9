---
title: "STG364_Securing_Amazon_EFS_For_Container_And_Data_Science_Applications"
date: 2019-12-04T14:09:28+09:00
tags: ["勉強系"]
tags: ["AWS re:invent2019"]
---

## ■なぜEFSを使う？
・レガシーアプリケーションからモダンデータにすぐコンバートできる

・クラウドネイティブのパフォーマンスを得られる。

・悪意を持ったユーザーを弾ける。(後述のIAM auth)

・リージョンをまたいで、別の国でコラボレーションもできる。
　→たとえば、ヨーロッパとアジアのデータを引っ張ってきたり。
　　→DataSyncを使う。

・クラウドネイティブで高信頼でコストが安い。  
　→他のコンピュートサービスで同構成を作成した場合

## ■EFSのセキュリティについて
### ■ネットワークトラフィックをセキュリティグループで制限

EFSのマウントターゲットに、Port2049で内部ネットワークと特定のSecurity groupを許可。  
NFSクライアントは上記内部ネットワークか、Security groupでしか入れない。

>例. Allow 192.168.1.50 port2049とsg-1234 port2049。

### ■DirectoryAccess
ADのUserID/GroupIDでNFSクライアントからEFSへアクセスするのを制御できる。  
個のディレクトリはボブ、このディレクトリはサリーみたいに。

### ■EFSの暗号化について
SSLトンネルプロセスから、TLSトンネルを通ってNFSコネクションを確立できる。

*(coming soon)* IAMロールをクライアント端末とEFS間に設定して認証させることができる。

## ■APIでNFSにアクセス
IAMの設定が必須。list/read/deleteそれぞれしてあげる必要あり。

## ■モダンアプリケーションとデータサイエンス
>(今までの古い考え方)  
・トラディショナルアプリ  
・共有アプリサーバー  
・ITデプロイと運用  

### 　→モダンアプリ開発者はAppサーバー/コンテナに直接デプロイと運用をしてしまえ
>(今までの古い考え方)
・トラディショナルデータサイエンス  
・共有サーバー、ディレクトリ、ツールセット、DB  
### 　→ユーザーあたりのノートブックサーバーを作ってデータサイエンティストはそのデータをトレーニングに使えばいい

## ■セミトラステッド端末とIAMを使って、接続をハンドリング
### ■IAM auth
・アノニマス端末からは読み込みのみ、書き込みできない  
・セミトラスト端末も読み込みのみ。  
・フルトラストは読み書きどっちも出来る。  
　→それぞれでIAMを作成して、端末毎に制限が可能 *(coming soon)*

### 今のEFSの認証ユーザーというのはほぼroot。

## ■暗号化の有効化
通常mountでは出来ず、mount -o tlsでTLS経由にしないとマウントできないようにできる。*(coming soon)*

## ■Amazon SageMakerの場合
特定のディレクトリをトレーニングジョブ用のデータとして設定可能。それ以外は拒否


## ■感想
ここでもモダンアプリを作ろうの話が出てきていて、  
今回のre:inventの隠れ主題なのかもしれない。  

提案段階から自社マネージドサービスを取ること前提に考えるんじゃなくて、  
Ops部分を無くすような構成を提案できるよう、もっとレベルアップが必要と感じました。

